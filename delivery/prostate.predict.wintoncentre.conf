<VirtualHost *:80>
	ServerName prostate.predict.wintoncentre.uk
	ServerAlias prostate.predict.wintoncentre.uk
	DocumentRoot /var/www/prostate.predict.wintoncentre.uk
	<Directory /var/www/prostate.predict.wintoncentre.uk>
	    AuthType Basic
	    AuthName "Restricted Content"
	    AuthUserFile /etc/apache2/.htpasswd
	    Require valid-user
	    
		AllowOverride All
		RewriteBase /
	    # Don't rewrite files or directories

        RewriteRule .*/assets/(.*)$ /assets/$1 [L]
        RewriteRule .*/css/(.*)$ /css/$1 [L]
        RewriteRule .*/js/(.*)$ /js/$1 [L]
        
	    RewriteCond %{REQUEST_FILENAME} -f [OR]
	    RewriteCond %{REQUEST_FILENAME} -d
	    RewriteRule ^ - [L]
	    # Rewrite everything else to index.html to allow html5 state links
	    RewriteRule ^ index.html [L]
	</Directory>
RewriteEngine on
RewriteCond %{SERVER_NAME} =prostate.predict.wintoncentre.uk
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>
