{"version":3,"sources":["predict_prostate/layout/result_panel.cljs"],"mappings":"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","names":["predict-prostate.layout.result-panel/tab-label-key","label-key","label","cljs.core/name","cljs.core.keyword","clojure.string/capitalize","var_args","G__35517","predict-prostate.layout.result-panel/safe-check","js/Error","kn1","kn2","predict_prostate.layout.result_panel.safe_check","f","cljs.core._EQ_","rum.core/build-defc","js/React.createElement","sablono.util/join-classes","sablono.interpreter/interpret","predict-prostate.layout.result-panel/result-tab-button","rum.core/reactive","ttt","rum.core/react","predict-prostate.state.run-time/active-results-pane","predict-prostate.state.run-time/active-results-change","G__35518","predict-prostate.layout.result-panel/result-tab-pane","content","js/window","js/window.ga","predict-prostate.layout.result-panel/result-tabs","rum.core/static","p1__35529#","cljs.core.map","rum.core/with-key","attrs35532","cljs.core.apply","cljs.core/map?","sablono.interpreter/attributes","sablono.normalize.merge_with_class","predict-prostate.layout.result-panel/result-panes","G__35535","G__35536","G__35537","predict-prostate.results.charts/results-in-charts","G__35538","G__35539","G__35540","G__35551","G__35552","G__35541","G__35553","predict-prostate.results.icons/results-in-icons*","G__35542","G__35543","G__35555","G__35556","G__35544","G__35557","predict-prostate.results.curves/results-in-curves","G__35545","G__35546","G__35559","G__35560","predict-prostate.results.table/results-in-table","G__35547","G__35548","G__35562","G__35563","G__35549","G__35565","predict-prostate.results.text/results-in-text","predict-prostate.layout.result-panel/result-panel","G__35570","predict-prostate.layout.treatments-panel/treatments-options","predict-prostate.layout.result-panel/side-panel","predict-prostate.results.util/alison-blue-1","predict-prostate.content-reader/all-subsections","G__35572","cljs.core/deref","fexpr__35571","predict-prostate.state.run-time/input-cursor","cljs.core.not_EQ_","p__35573","map__35574","cljs.core/--destructure-map","cljs.core.get","attrs35575","attrs35576","predict-prostate.layout.result-panel/results","container?","props"],"sourcesContent":["(ns predict-prostate.layout.result-panel\n  (:require [clojure.string :refer [capitalize]]\n            [rum.core :as rum]\n            [predict-prostate.state.run-time :refer [active-results-pane active-results-change input-cursor]]\n            [predict-prostate.layout.treatments-panel :refer [treatments-options]]\n            [predict-prostate.components.panels :refer [titled-panel]]\n            [predict-prostate.results.util :refer [alison-blue-1]]\n            [pubsub.feeds :refer [publish]]\n            [interop.jsx :refer [jsx]]\n            [predict-prostate.results.table :refer [results-in-table]]\n            [predict-prostate.results.curves :refer [results-in-curves]]\n            [predict-prostate.results.charts :refer [results-in-charts]]\n            [predict-prostate.results.icons :refer [results-in-icons*]]\n            [predict-prostate.results.text :refer [results-in-text]]\n            [predict-prostate.results.sidefx :refer [results-in-sidefx]]\n            [predict-prostate.content-reader :refer [all-subsections]]\n            ))\n\n(defn tab-label-key\n  \"Lookup/edit key for a tab given a label or a key for that label\n  ; (tab-label-key :curve)\n  ; => [:tab-label/curve \\\"Curve\\\"]\n  \"\n  [label-key]\n  (let [label (name label-key)]\n    [(keyword (str \"tab-label/\" label)) (capitalize label)]))\n\n(defn safe-check\n  \"Check whether kn1 and kn2 share same names (2-arity) or some other property f (3-arity).\"\n  ([kn1 kn2]\n   (safe-check kn1 kn2 name))\n  ([kn1 kn2 f]\n   (= (f kn1) (f kn2))))\n\n(rum/defc result-tab-button < rum/reactive [ttt label-key]\n  [:li {:role     \"presentation\"\n        :class    (if (safe-check (rum/react active-results-pane) label-key) \"active\" nil)\n        :on-click #(publish active-results-change (name label-key))\n        :style    {:cursor           \"pointer\"\n                   :border-radius    \"3px\"\n                   :background-color \"#def\"}\n        :key      (name label-key)\n        }\n   [:a {:aria-controls (name label-key) :role \"tab\"\n        ;:data-on \"click\" :data-event-category \"Results Tab\" :data-event-action label       ; Old html-tag trigger.\n        } (ttt (tab-label-key label-key))]\n   ])\n\n(rum/defc result-tab-pane < rum/reactive [label content]\n  [:div {:id    label :role \"tabpanel\"\n         :class (str \"tab-pane\" (if (= (rum/react active-results-pane) label) \"active\" nil))\n         }\n   (when (= (rum/react active-results-pane) label)\n     (if content\n       (do (if (exists? js/window.ga)\n             (.ga js/window \"send\" \"event\" \"Results Tab\" label)\n             ) (content))\n       [:p \"No content yet\"])\n     ;(.log js/console \"content called: \" label)\n     )\n   ]\n  )\n\n(rum/defc result-tabs < rum/static [ttt]\n  [:ul.nav.nav-pills {:role  \"tablist\"\n                      :style {:font-size \"16px\"}}\n   (map #(rum/with-key (result-tab-button ttt %) (name %)) [:charts\n                                                            :icons\n                                                            :curves\n                                                            :table \n                                                            :texts])\n   #_[:a {\n        :ga-on \"click\" :ga-event-category \"Results Tab\" :ga-event-action \"test\"\n        :style {:background-color \"green\"}\n        } \"Some test clickable item\"]\n   ])\n\n(rum/defc result-panes < rum/static [ttt]\n  [:.tab-content\n   (result-tab-pane \"charts\" #(results-in-charts {:title (ttt [:chart/title \"Overall Survival\"]) :ttt ttt}))\n   (result-tab-pane \"icons\" #(results-in-icons* {:ttt ttt}))\n   (result-tab-pane \"curves\" #(results-in-curves {:ttt ttt}))\n   (result-tab-pane \"table\" #(results-in-table ttt))\n   (result-tab-pane \"texts\" #(results-in-text {:ttt ttt}))\n   ])\n\n(rum/defc result-panel < rum/reactive [ttt]\n  [:div#results\n   [:h3 {:style {:margin-top 20}} (ttt [:results/title \"Results\"])]\n   (result-tabs ttt)\n   (treatments-options ttt)\n   (result-panes ttt)]\n  )\n\n(rum/defc side-panel [ttt]\n  [:.well {:style {:margin-top 20  :background-color alison-blue-1}}\n   (all-subsections ttt \"tool-postamble\")\n   (when (#{4 5} @(input-cursor :grade-group))\n     (all-subsections ttt \"high-grade-group-warning\"))\n   (when (not= :no @(input-cursor :metastasis))\n     (all-subsections ttt \"metastasis-warning\"))\n   (all-subsections ttt \"scroll-down-for\")\n   ])\n\n(rum/defc results < rum/reactive [{:keys [ttt container?] :as props}]\n  [:div #_(when container? {:class-name \"container\"})\n   [:.row\n    [:.col-md-6.col-md-offset-1\n     (result-panel ttt)]\n    [:.col-md-4\n     (side-panel ttt)]\n    ]])"]}