{"version":3,"sources":["rum/cursor.cljs"],"mappings":"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","names":["this__4450__auto__","writer__4451__auto__","opt__4452__auto__","cljs.core/-write","rum.cursor/Cursor","rum.cursor/->Cursor","ref","path","meta","this","other","_","cljs.core.get_in","cljs.core/-deref","key","callback","cljs.core/add-watch","cljs.core/List","oldv","newv","old","new","cljs.core.not_EQ_","cljs.core/remove-watch","goog/getUid","cljs.core.swap_BANG_","cljs.core/assoc-in","f","G__40771","a","G__40772","G__40773","b","G__40774","G__40775","G__40776","rest","cljs.core.apply","writer","opts","cljs.core/pr-writer"],"sourcesContent":["(ns ^:no-doc rum.cursor)\n\n\n(deftype Cursor [ref path meta]\n  Object\n  (equiv [this other]\n    (-equiv this other))\n\n  IAtom\n  \n  IMeta\n  (-meta [_] meta)\n  \n  IEquiv\n  (-equiv [this other]\n    (identical? this other))\n\n  IDeref\n  (-deref [_]\n    (get-in (-deref ref) path))\n\n  IWatchable\n  (-add-watch [this key callback]\n    (add-watch ref (list this key)\n      (fn [_ _ oldv newv]\n        (let [old (get-in oldv path)\n              new (get-in newv path)]\n          (when (not= old new)\n            (callback key this old new)))))\n    this)\n  \n  (-remove-watch [this key]\n    (remove-watch ref (list this key))\n    this)\n\n  IHash\n  (-hash [this] (goog/getUid this))\n\n  IReset\n  (-reset! [_ newv]\n    (swap! ref assoc-in path newv)\n    newv)\n\n  ISwap\n  (-swap! [this f]\n    (-reset! this (f (-deref this))))\n  (-swap! [this f a]\n    (-reset! this (f (-deref this) a)))\n  (-swap! [this f a b]\n    (-reset! this (f (-deref this) a b)))\n  (-swap! [this f a b rest]\n    (-reset! this (apply f (-deref this) a b rest)))\n  \n  IPrintWithWriter\n  (-pr-writer [this writer opts]\n    (-write writer \"#object [rum.cursor.Cursor \")\n    (pr-writer {:val (-deref this)} writer opts)\n    (-write writer \"]\")))\n\n"]}