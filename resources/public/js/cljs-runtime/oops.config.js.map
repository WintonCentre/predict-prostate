{"version":3,"sources":["oops/config.cljs"],"mappings":"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","names":["oops.config/get-initial-runtime-config","oops.config/*runtime-config*","js/Error","oops.config/set-current-runtime-config!","new-config","cljs.core/map?","oops.config/get-current-runtime-config","var_args","args__4824__auto__","len__4818__auto__","i__4819__auto__","argseq__4825__auto__","cljs.core/IndexedSeq","oops.config/update-current-runtime-config!","seq36108","G__36109","cljs.core/first","cljs.core/next","self__4805__auto__","f-or-map","args","oops.config.update_current_runtime_config_BANG_","cljs.core/merge","cljs.core.apply","oops.config/get-config-key","p__36118","vec__36119","cljs.core.nth","seq36116","G__36117","key","config","G__36122","or__4212__auto__","oops.config/has-config-key?","p__36126","vec__36127","seq36124","G__36125","cljs.core.not_EQ_","cljs.core.get","oops.config/get-error-reporting","p__36139","vec__36140","seq36138","self__4806__auto__","cljs.core/seq","oops.config.get_config_key","oops.config/get-warning-reporting","p__36146","vec__36147","seq36143","oops.config/get-suppress-reporting","p__36154","vec__36156","seq36151","oops.config/get-child-factory","p__36166","vec__36167","seq36165","oops.config/set-child-factory!","new-factory-fn","oops.config/throw-errors-from-macro-call-sites?","p__36173","vec__36174","seq36170","oops.config/use-envelope?","p__36190","vec__36191","seq36186"],"sourcesContent":["(ns oops.config\n  \"Code supporting dynamic (run-time) configuration. See runtime-prefixed keys in config map in defaults.clj.\"\n  (:require-macros [oops.config :refer [gen-runtime-config]]))\n\n(defn get-initial-runtime-config []\n  (gen-runtime-config))\n\n; use oops.config/get-current-runtime-config to get currently effective config\n(def ^:dynamic *runtime-config* (get-initial-runtime-config))\n\n; -- public api -------------------------------------------------------------------------------------------------------------\n\n(defn set-current-runtime-config! [new-config]\n  {:pre [(map? new-config)]}\n  (set! *runtime-config* new-config)\n  new-config)\n\n(defn get-current-runtime-config []\n  *runtime-config*)\n\n(defn update-current-runtime-config! [f-or-map & args]\n  (if (map? f-or-map)\n    (update-current-runtime-config! merge f-or-map)\n    (set-current-runtime-config! (apply f-or-map (get-current-runtime-config) args))))\n\n; -- icing ------------------------------------------------------------------------------------------------------------------\n\n(defn get-config-key [key & [config]]\n  (key (or config (get-current-runtime-config))))\n\n(defn ^boolean has-config-key? [key & [config]]\n  (not= ::not-found (get (or config (get-current-runtime-config)) key ::not-found)))\n\n(defn get-error-reporting [& [config]]\n  (get-config-key :error-reporting config))\n\n(defn get-warning-reporting [& [config]]\n  (get-config-key :warning-reporting config))\n\n(defn get-suppress-reporting [& [config]]\n  (get-config-key :suppress-reporting config))\n\n(defn get-child-factory [& [config]]\n  (get-config-key :child-factory config))\n\n(defn set-child-factory! [new-factory-fn]\n  (update-current-runtime-config! {:child-factory new-factory-fn}))\n\n(defn ^boolean throw-errors-from-macro-call-sites? [& [config]]\n  (true? (get-config-key :throw-errors-from-macro-call-sites config)))\n\n(defn ^boolean use-envelope? [& [config]]\n  (true? (get-config-key :use-envelope config)))\n"]}