{"version":3,"sources":["predict_prostate/pages/root.cljs"],"mappings":";AAaA,AAAA,AAAMA;AAAN,AACE,AAAA,AAASC;;AAGX,AAAA,AAAMC;AAAN,AACE,AAAA,AAASD;;AAKX,AAAA,AAAME;AAAN,AACE,AAAA,AAACC,AAAmBC,AAA0BL;;AAC9C,AAAA,AAACI,AAAmBC,AAAyBH;;AAE/C,AAAA,AAAA,AAAKI,AAAwB,AAAKC;AAAL,AAEE,AAAA,AAAAC,AAAQ,AAAcH;AACpB,AAAI,AAAoB,AAAA,AAAaA;AACnC,AAACF;;AACD,AAAMM,AAAI,AAAA,AAAaJ;AAAvB,AACE,AAAA,AAAAK,AAAcD;AAAd,AAAmB,AAAI,AAAAC,AAAA,AAACC;AAAgC,AAACX;;AAAc,AAACE;;;;;AAC5E,AAACC;;;AAEHI;;AAE/B;;;AAAA,AAAAK,AAAA,AAAUS;AAAV,AAAA,AAAA,AAAAR,AAGmC,AAACc,AAAUC;AAH9C,AAAAd,AAAAD,AAAA,AAAA,AAGSU;AAHT,AAAAT,AAAAD,AAAA,AAAA,AAGcW;AAHd,AAAAV,AAAAD,AAAA,AAAA,AAGqBY;AAHrBZ,AAG+Ba;AAH/B,AAAA,AAAAX,AAKK,AAAAc,AAAMN;AAANM,AAAA,AAAA,AAAAA,AAAAC,AAAA,AAAAD,AAAA;AAAA,AAAA,AAAAA;AAAA;AACQ,AAACG,AAAAA,AAAAA;;;AADT;AAES,AAACC,AAAAA,AAAAA,AAAMP,AAAAA;;;AAFhB;AAGQ,AAACQ,AAAAA,AAAAA;;;AAHT;AAIW,AAACC,AAAAA,AAAAA,AAAQT,AAAAA;;;AAJpB;AAKS,AAACU,AAAAA,AAAAA,AAAMV,AAAAA;;;AALhB;AAOa,AAACW,AAAAA,AAAAA;;;;AAPd,AAAA,AAAAN,AAAA,AAAA,AAAAF;;;;AALL,AAAA,AAAAb,AAAAC,AAAA,AAAA,AAAA,AAAAC,AAAAH,AAAA,AAAAI,AAAAJ,AAAA,AAAA,AAAA,AAAAG,AAAAH,AAAA,AAAA,AAAA,AAAAK,AAAAL;AAAA,AAAA,AAAiBO,AAAahB","names":["predict-prostate.pages.root/before-print","predict-prostate.state.run-time/media-change","predict-prostate.pages.root/after-print","predict-prostate.pages.root/before-after-print","js/goog.object.set","js/window","predict-prostate.pages.root/media-watch","state","cljs.core/not","mql","p1__34285#","js/goog.object.get","rum.core/build-defc","vec__34287","cljs.core.nth","attrs34286","cljs.core.apply","js/React.createElement","cljs.core/map?","sablono.interpreter/attributes","sablono.interpreter/interpret","predict-prostate.pages.root/root","rum.core/reactive","page","params","query","rt","rum.core/react","predict-prostate.state.run-time/route","G__34290","cljs.core/Keyword","js/Error","predict-prostate.pages.home/home","predict-prostate.pages.about/about","predict-prostate.pages.tool/tool","predict-prostate.pages.contact/contact","predict-prostate.pages.legal/legal","predict-prostate.pages.not-found/not-found"],"sourcesContent":["(ns predict-prostate.pages.root\n  (:require                                                 ;[org.martinklepsch.derivatives :refer [rum-derivatives]]\n    [rum.core :as rum]\n    [predict-prostate.state.run-time :refer [rtdb route media-change media-cursor]]\n    [predict-prostate.pages.home :refer [home]]\n    [predict-prostate.pages.about :refer [about]]\n    [predict-prostate.pages.legal :refer [legal]]\n    [predict-prostate.pages.contact :refer [contact]]\n    [predict-prostate.pages.tool :refer [tool]]\n    [predict-prostate.pages.not-found :refer [not-found]]\n    [pubsub.feeds :refer [->Topic publish subscribe unsubscribe]]\n    ))\n\n(defn before-print []\n  (publish media-change :print)\n  )\n\n(defn after-print []\n  (publish media-change :screen)\n  )\n\n;see https://www.tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/\n\n(defn before-after-print []\n  (js/goog.object.set js/window \"onbeforeprint\" before-print)\n  (js/goog.object.set js/window \"onafterprint\" after-print))\n\n(def media-watch {:did-mount (fn [state]\n                               ; chrome matchMedia is dodgy, and we detect it through its addEventListener prototype\n                               (if-not (.-oldBrowser js/window)\n                                 (if (.-addEventListener (.matchMedia js/window \"print\"))\n                                   (before-after-print)     ; chrome\n                                   (let [mql (.matchMedia js/window \"print\")]\n                                     (.addListener mql #(if (js/goog.object.get % \"matches\") (before-print) (after-print))))) ; firefox\n                                 (before-after-print)\n                                 )\n                               state)})\n\n(rum/defc root < rum/reactive media-watch                   ;(rum-derivatives drv-spec)\n                 \"Root of site. All components are within this tree\"\n  []\n  (let [[page params query :as rt] (rum/react route)]\n    [:div\n     (case page\n       :home (home)\n       :about (about rt)\n       :tool (tool)\n       :contact (contact rt)\n       :legal (legal rt)\n\n       :not-found (not-found)\n       ;[:div \"404\"]\n       )]))\n\n\n\n\n;; (comment\n;;   (ns predict-prostate.pages.root\n;;     (:require                                               ;[org.martinklepsch.derivatives :refer [rum-derivatives]]\n;;       [rum.core :as rum]\n;;       [predict-prostate.state.run-time :refer [rtdb route]]\n;;       [predict-prostate.pages.home :refer [home]]\n;;       [predict-prostate.pages.about :refer [about]]\n;;       [predict-prostate.pages.patient :refer [patient]]\n;;       [predict-prostate.pages.clinician :refer [clinician]]\n;;       [predict-prostate.pages.tool :refer [tool]]\n;;       ;       [predict-prostate.pages.news :refer [news]]\n;;       [predict-prostate.pages.not-found :refer [not-found]]\n;;       ))\n\n\n;;   (rum/defc root < rum/reactive                             ;(rum-derivatives drv-spec)\n;;                    \"Root of site. All components are within this tree\"\n;;     []\n;;     (let [[page params query] (rum/react route)]\n;;       [:div\n;;        (case page\n;;          :home (home)\n;;          :about (about)\n;;          :patient (patient)\n;;          :clinician (clinician)\n;;          :tool (tool)\n;;          :not-found (not-found)\n;;          [:div \"404\"]\n;;          )])))\n\n"]}